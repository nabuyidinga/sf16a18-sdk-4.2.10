#!/bin/sh

[ -d "/etc/board.d/" -a ! -f "/etc/board.json" ] && {
	for a in `ls /etc/board.d/*`; do
		[ -x $a ] || continue;
		$(. $a)
	done
}

[ -f "/etc/board.json" ] || return 1
[ -f "/etc/config/network" ] || {
	touch /etc/config/network
	/bin/config_generate
}

[ -f /etc/config/wireless  ] && {
       sed -i "s/ifname 'rai/ifname 'sfi/g" /etc/config/wireless
}
[ -f /etc/config/network   ] && {
       sed -i "s/ifname 'rai/ifname 'sfi/g" /etc/config/network
}

test="/etc/crontabs/admin"
if [ ! -f "$test"  ] ; then
	a=`head -20 /dev/urandom | cksum | cut -f1 -d" "`
	b=$(( $a % 5  ))
	b=$(( $b + 1  ))
	c=$(( $a % 59  ))
	echo $c $b
	echo "$c $b * * * /usr/bin/otaupgrade" >> /etc/crontabs/admin
else
	echo "already  find"
fi
